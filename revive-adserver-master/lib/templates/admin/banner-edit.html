{*<!--

+---------------------------------------------------------------------------+
| Revive Adserver                                                           |
| http://www.revive-adserver.com                                            |
|                                                                           |
| Copyright: See the COPYRIGHT.txt file.                                    |
| License: GPLv2 or later, see the LICENSE.txt file.                        |
+---------------------------------------------------------------------------+
  
-->*}
{if !$bannerId}
<form action='banner-edit.php' method='POST'>
    <input type='hidden' name='clientid' value='{$clientId}'>
    <input type='hidden' name='campaignid' value='{$campaignId}'>
    <input type='hidden' name='bannerid' value='{$bannerId}'>

    <table border='0' width='100%' cellpadding='0' cellspacing='0'>
        <tr><td height='25' colspan='3'><b>{t str=ChooseBanner}</b></td></tr>
        <tr><td height='25'>
        <select name='type' onChange='this.form.action=this.form.action+"?clientid={$clientId}&campaignid={$campaignId}";this.form.submit();' {tabindex} >
            {html_options options=$bannerTypes selected=$bannerType}
        </select>
        </td></tr>
    </table>
</form>
{phpAds_ShowBreak}

{else}
    {* Only display the notices when *changing* a banner size, not for new banners *}
<div class='errormessage' id='warning_change_zone_type' style='display:none'> <img class='errormessage' src='{$assetPath}/images/errormessage.gif' align='absmiddle' />
<span class='tab-r'>{t str=Warning}:</span><br />
{t str=WarnChangeZoneType}
</div>

<div class='errormessage' id='warning_change_banner_size' style='display:none'> <img class='errormessage' src='{$assetPath}/images/warning.gif' align='absmiddle' />
<span class='tab-s'> {t str=Notice}</span><br />
{t str=WarnChangeBannerSize}
</div>
{/if}

{if $disabled}
<div class='errormessage' id='warning_banner_readonly'> <img class='errormessage' src='{$assetPath}/images/warning.gif' align='absmiddle' />
<span class='tab-s'> {t str=Notice}</span><br />
{t str=WarnBannerReadonly}
</div>
{/if}

{*banner form*}
{*YZZZ*}
{include file=form/form.html form=$form}
{*YYZZZ*}
{*/banner form*}


<script language='JavaScript'>
<!--

{if $bannerId}
    document.bannerHeight ={$bannerHeight};
    document.bannerWidth ={$bannerWidth};
{/if}

{literal}
    function selectFile(o, handleSWF)
    {
        var filename = o.value.toLowerCase();
        var bannerForm = findObj ('bannerForm');
        $(o).siblings('input[value=t]').attr('checked', true);

        if (handleSWF) {
            // Show SWF Layer
            var swflayer = findObj ('swflayer');
            var swfAlternate1 = findObj ('swfAlternative1');
            var swfAlternate2 = findObj ('swfAlternative2');
            var iab_rmedia_note = findObj ('iab_rmedia_note');

            if (swflayer) {
                if (filename.indexOf('swf') + 3 == filename.length) {
                    swflayer.style.display = '';
                    swfAlternate1.style.display = '';
                    swfAlternate2.style.display = '';
                    iab_rmedia_note.style.display = ''; 
                } else {
                    swflayer.style.display = 'none';
                    swfAlternate1.style.display = 'none';
                    swfAlternate2.style.display = 'none';
                    iab_rmedia_note.style.display = 'none';
                }
            }
        }

    }

    function oa_sizeChangeUpdateMessage(id)
    {
        if (document.bannerWidth != document.bannerForm.width.value ||
            document.bannerHeight !=  document.bannerForm.height.value) {
                oa_show(id);

        } else if (document.bannerWidth == document.bannerForm.width.value &&
                   document.bannerHeight ==  document.bannerForm.height.value) {
            oa_hide(id);
        }
    }

    function oa_show(id)
    {
        var obj = findObj(id);
        if (obj) { obj.style.display = 'block'; }
    }

    function oa_hide(id)
    {
        var obj = findObj(id);
        if (obj) { obj.style.display = 'none'; }
    }
{/literal}
//-->
</script>


{literal}
<script type='text/javascript'>
    $(document).ready(function () {
        var selCatLevel1Id = $('#iab_cat1').find('option:selected').val();
        var selCatLevel2Id = $('#iab_cat2').find('option:selected').val();
        var selCatLevel3Id = $('#iab_cat3').find('option:selected').val();
        var level2Opts = new Array;
        $('select.cat2 option').each(function () {
            level2Opts.push($(this));
        });
        //alert("IabCatsLevel2:" + level2Opts.length);
        $('select.cat2 option').remove().end();
        var level3Opts = new Array;
        $('select.cat3 option').each(function () {
            level3Opts.push($(this));
        });
        $('select.cat3 option').remove().end();

        if (selCatLevel1Id != "0") {
            catLevel2 = $('select.cat2');
            for (var i in level2Opts) {
                var vals = [];
                vals = level2Opts[i][0].value.split("_");
                if (vals[0] == "0" || vals[0] == selCatLevel1Id) {
                    catLevel2.append(level2Opts[i]);
                }
            };

            $('select.cat2').find('option').each(function () {
                if ($(this).val() == selCatLevel2Id)
                { $(this).attr('selected', true); }
            });

            catLevel3 = $('select.cat3');
            val2s = selCatLevel2Id.split("_");
            for (var i in level3Opts) {
                var vals = [];
                vals = level3Opts[i][0].value.split("_");
                if ((vals[0] == "0" && vals[1] == "0") || (vals[0] == val2s[0] && vals[1] == val2s[1])) {
                    catLevel3.append(level3Opts[i]);
                }
            };

            $('select.cat3').find('option').each(function () {
                if ($(this).val() == selCatLevel3Id)
                { $(this).attr('selected', true); }
            });
        }

        $('#iab_cat1').change(function (event) {
            selCatLevel1Id = $(this).find('option:selected').val();
            catLevel2 = $('select.cat2');
            catLevel2.find('option').remove().end();
            for (var i in level2Opts) {
                var vals = [];
                vals = level2Opts[i][0].value.split("_");
                if (vals[0] == "0" || vals[0] == selCatLevel1Id) {
                    catLevel2.append(level2Opts[i]);
                }
            };
            catLevel2.find('option:first').attr('selected', true);

            catLevel3 = $('select.cat3');
            catLevel3.find('option').remove().end();
            for (var i in level3Opts) {
                catLevel3.append(level3Opts[i]);
                break;
            };
            catLevel3.find('option:first').attr('selected', true);
        });

        $('select.cat2').change(function () {
            selCatLevel2Id = $(this).find('option:selected').val().split("_");
            catLevel3 = $('select.cat3');
            catLevel3.find('option').remove().end();
            for (var i in level3Opts) {
                vals = level3Opts[i][0].value.split("_");
                if ((vals[0] == "0" && vals[1] == "0") || (vals[0] == selCatLevel2Id[0] && vals[1] == selCatLevel2Id[1])) {
                    catLevel3.append(level3Opts[i]);
                }
            };
            catLevel3.find('option:first').attr('selected', true);
        });
    });
</script>
{/literal}

